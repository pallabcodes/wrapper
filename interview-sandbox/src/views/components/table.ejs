<% 
  // Bootstrap 5 Table component
  // Usage: <%- include('../components/table', { 
  //   headers: ['Name', 'Email', 'Role'],
  //   data: [{ name: 'John', email: 'john@example.com', role: 'user' }],
  //   columns: ['name', 'email', 'role'],
  //   striped: true,
  //   hover: true,
  //   bordered: false,
  //   emptyMessage: 'No data available'
  // }) %>
  
  const headers = typeof headers !== 'undefined' ? headers : [];
  const data = typeof data !== 'undefined' ? data : [];
  const columns = typeof columns !== 'undefined' ? columns : [];
  const striped = typeof striped !== 'undefined' ? striped : true;
  const hover = typeof hover !== 'undefined' ? hover : true;
  const bordered = typeof bordered !== 'undefined' ? bordered : false;
  const emptyMessage = typeof emptyMessage !== 'undefined' ? emptyMessage : 'No data available';
  const compact = typeof compact !== 'undefined' ? compact : false;
  
  const tableClass = 'table' + (striped ? ' table-striped' : '') + (hover ? ' table-hover' : '') + (bordered ? ' table-bordered' : '') + (compact ? ' table-sm' : '');
%>

<div class="table-responsive rounded-3 border" style="border-color: var(--border-light) !important; background-color: var(--bg-primary); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
  <table class="<%= tableClass %> mb-0">
    <% if (headers.length > 0) { %>
      <thead style="background-color: var(--bg-secondary);">
        <tr>
          <% headers.forEach(function(header) { %>
            <th class="px-4 py-3 small fw-semibold text-uppercase" style="color: var(--text-primary); border-color: var(--border-light);">
              <%= header %>
            </th>
          <% }); %>
        </tr>
      </thead>
    <% } %>
    <tbody>
      <% if (data.length === 0) { %>
        <tr>
          <td 
            colspan="<%= headers.length || columns.length %>" 
            class="text-center py-5"
            style="color: var(--text-tertiary);"
          >
            <div class="d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-inbox fa-2x mb-2" style="color: var(--text-tertiary);"></i>
              <p class="small mb-0"><%= emptyMessage %></p>
            </div>
          </td>
        </tr>
      <% } else { %>
        <% data.forEach(function(row, index) { %>
          <tr style="background-color: <%= striped && index % 2 === 1 ? 'var(--bg-secondary)' : 'var(--bg-primary)' %>;">
            <% columns.forEach(function(column) { %>
              <td class="px-4 py-3 small" style="color: var(--text-primary); border-color: var(--border-light);">
                <%= row[column] !== undefined ? row[column] : '' %>
              </td>
            <% }); %>
          </tr>
        <% }); %>
      <% } %>
    </tbody>
  </table>
</div>
