<% 
  // Reusable Alert Component
  // Usage: <%- include('../components/alert', {
  //   type: 'success', // 'success', 'error', 'warning', 'info'
  //   title: 'Success!',
  //   message: 'Operation completed successfully',
  //   dismissible: true,
  //   id: 'alert-1'
  // }) %>
  
  const alertType = typeof type !== 'undefined' ? type : 'info';
  const alertTitle = typeof title !== 'undefined' ? title : '';
  const alertMessage = typeof message !== 'undefined' ? message : '';
  const alertDismissible = typeof dismissible !== 'undefined' ? dismissible : false;
  const alertId = typeof id !== 'undefined' ? id : `alert_${Math.random().toString(36).substring(7)}`;
  
  const typeConfig = {
    success: {
      bg: 'var(--color-success-light)',
      border: 'var(--color-success)',
      text: 'var(--color-success-dark)',
      icon: 'fas fa-check-circle',
      iconColor: 'var(--color-success)'
    },
    error: {
      bg: 'var(--color-error-light)',
      border: 'var(--color-error)',
      text: 'var(--color-error-dark)',
      icon: 'fas fa-exclamation-circle',
      iconColor: 'var(--color-error)'
    },
    warning: {
      bg: 'var(--color-warning-light)',
      border: 'var(--color-warning)',
      text: 'var(--color-warning-dark)',
      icon: 'fas fa-exclamation-triangle',
      iconColor: 'var(--color-warning)'
    },
    info: {
      bg: 'var(--color-info-light)',
      border: 'var(--color-info)',
      text: 'var(--color-info-dark)',
      icon: 'fas fa-info-circle',
      iconColor: 'var(--color-info)'
    }
  };
  
  const config = typeConfig[alertType];
%>

<div 
  id="<%= alertId %>"
  class="flex items-start space-x-3 p-4 rounded-design-lg border transition-design"
  role="alert"
  style="
    background-color: <%= config.bg %>;
    border-color: <%= config.border %>;
    color: <%= config.text %>;
  "
>
  <i class="<%= config.icon %> mt-0.5" style="color: <%= config.iconColor %>;"></i>
  
  <div class="flex-1">
    <% if (alertTitle) { %>
      <h4 class="font-semibold mb-1"><%= alertTitle %></h4>
    <% } %>
    <% if (alertMessage) { %>
      <p class="text-sm"><%= alertMessage %></p>
    <% } %>
  </div>
  
  <% if (alertDismissible) { %>
    <button 
      onclick="document.getElementById('<%= alertId %>').style.display='none';"
      class="ml-2 opacity-70 hover:opacity-100 transition-opacity"
      aria-label="Dismiss alert"
    >
      <i class="fas fa-times"></i>
    </button>
  <% } %>
</div>

<script>
  // Auto-dismiss after 5 seconds if dismissible
  <% if (alertDismissible) { %>
    setTimeout(function() {
      const alert = document.getElementById('<%= alertId %>');
      if (alert) {
        alert.style.transition = 'opacity 0.3s ease-out';
        alert.style.opacity = '0';
        setTimeout(function() {
          alert.style.display = 'none';
        }, 300);
      }
    }, 5000);
  <% } %>
</script>

