<% 
  // CRUD List Component with Pagination, Inline/Modal Editing, Search, and Filters
  // Generic component that works with any entity type (students, courses, todos, etc.)
  // Pass configuration object with: title, entityName, apiEndpoint, headers, columns, fields, etc.
  
  // Extract parameters with safe defaults to avoid variable name conflicts
  const pageTitleValue = (typeof title !== 'undefined' && title !== null) ? title : 'Items';
  const entityNameValue = (typeof entityName !== 'undefined' && entityName !== null) ? entityName : 'item';
  const apiEndpointValue = (typeof apiEndpoint !== 'undefined' && apiEndpoint !== null) ? apiEndpoint : '/api/items';
  const headersValue = (typeof headers !== 'undefined' && Array.isArray(headers)) ? headers : [];
  const columnsValue = (typeof columns !== 'undefined' && Array.isArray(columns)) ? columns : [];
  const fieldsValue = (typeof fields !== 'undefined' && Array.isArray(fields)) ? fields : [];
  const searchableValue = (typeof searchable !== 'undefined') ? searchable : true;
  const createButtonValue = (typeof createButton !== 'undefined') ? createButton : true;
  const editModeValue = (typeof editMode !== 'undefined' && editMode !== null) ? editMode : 'modal';
  const itemsPerPageValue = (typeof itemsPerPage !== 'undefined' && !isNaN(itemsPerPage)) ? itemsPerPage : 10;
  
  // Generate column names array as JSON string for JavaScript
  let columnNamesJson = '[';
  columnsValue.forEach(function(col, idx) {
    columnNamesJson += '"' + col + '"';
    if (idx < columnsValue.length - 1) columnNamesJson += ',';
  });
  columnNamesJson += ']';
  
  // Generate field names array as JSON string for JavaScript
  let fieldNamesJson = '[';
  fieldsValue.forEach(function(field, idx) {
    fieldNamesJson += '"' + field.name + '"';
    if (idx < fieldsValue.length - 1) fieldNamesJson += ',';
  });
  fieldNamesJson += ']';
  
  // Generate fields array as JSON string for JavaScript
  const fieldsJson = JSON.stringify(fieldsValue);
%>

<!-- CRUD List Content -->
<div class="min-vh-100 p-4 p-md-5" style="background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%); padding-top: 5rem !important;">
  <div class="container" style="max-width: 1400px;">
    <!-- Header -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 mb-md-5 gap-3">
      <div>
        <h1 class="fs-1 fw-bold mb-2" style="color: var(--text-primary); letter-spacing: -0.02em;"><%= pageTitleValue %></h1>
        <p class="small mb-0" style="color: var(--text-secondary); font-size: 0.9rem;">Manage your <%= pageTitleValue.toLowerCase() %></p>
      </div>
      <% if (createButtonValue) { %>
        <button type="button" class="btn btn-primary px-4 py-2" onclick="openCreateModal()" style="background-color: var(--color-primary-600); border-color: var(--color-primary-600); font-weight: 500; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); transition: all 0.2s ease;" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0, 0, 0, 0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0, 0, 0, 0.1)';">
          <i class="fas fa-plus me-2"></i>Add New
        </button>
      <% } %>
    </div>

    <!-- Search and Filters -->
    <% if (searchableValue) { %>
      <div class="mb-4 mb-md-5">
        <div class="row g-3">
          <div class="col-md-8 col-lg-6">
            <div class="position-relative">
              <div class="position-absolute top-50 start-0 translate-middle-y d-flex align-items-center ps-3" style="z-index: 10; pointer-events: none;">
                <i class="fas fa-search" style="color: var(--text-tertiary); font-size: 0.9rem;"></i>
              </div>
              <input type="text" id="searchInput" class="form-control" placeholder="Search <%= pageTitleValue.toLowerCase() %>..." 
                     style="border-color: var(--border-medium); background-color: var(--bg-primary); color: var(--text-primary); padding-left: 2.75rem; padding-right: 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); transition: all 0.2s ease;"
                     onkeyup="handleSearch()"
                     onfocus="this.style.borderColor='var(--color-primary-600)'; this.style.boxShadow='0 2px 6px rgba(37, 99, 235, 0.15)';"
                     onblur="this.style.borderColor='var(--border-medium)'; this.style.boxShadow='0 1px 3px rgba(0, 0, 0, 0.1)';">
            </div>
          </div>
          <div class="col-md-4 col-lg-3">
            <select id="filterSelect" class="form-select" onchange="handleFilter()" 
                    style="border-color: var(--border-medium); background-color: var(--bg-primary); color: var(--text-primary); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); border-radius: 0.5rem; transition: all 0.2s ease;"
                    onfocus="this.style.borderColor='var(--color-primary-600)'; this.style.boxShadow='0 2px 6px rgba(37, 99, 235, 0.15)';"
                    onblur="this.style.borderColor='var(--border-medium)'; this.style.boxShadow='0 1px 3px rgba(0, 0, 0, 0.1)';">
              <option value="">All <%= pageTitleValue %></option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
          </div>
        </div>
      </div>
    <% } %>

    <!-- Table -->
    <div class="rounded-4 border-0 mb-4" style="background-color: var(--bg-primary); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); overflow: hidden;">
      <div class="table-responsive">
        <table class="table table-hover mb-0" id="dataTable" style="margin-bottom: 0;">
          <thead style="background: linear-gradient(135deg, var(--bg-secondary) 0%, #f8f9fa 100%);">
            <tr>
              <% headersValue.forEach(function(header) { %>
                <th class="px-4 py-3 small fw-semibold text-uppercase" style="color: var(--text-primary); border-color: var(--border-light); letter-spacing: 0.05em; font-size: 0.75rem;">
                  <%= header %>
                </th>
              <% }); %>
              <th class="px-4 py-3 small fw-semibold text-uppercase text-end" style="color: var(--text-primary); border-color: var(--border-light); letter-spacing: 0.05em; font-size: 0.75rem;">Actions</th>
            </tr>
          </thead>
          <tbody id="tableBody" style="background-color: var(--bg-primary);">
            <tr>
              <td colspan="<%= headersValue.length + 1 %>" class="text-center py-5" style="color: var(--text-tertiary);">
                <div class="d-flex flex-column align-items-center">
                  <i class="fas fa-spinner fa-spin fa-2x mb-3" style="color: var(--color-primary-600);"></i>
                  <p class="small mb-0 fw-medium" style="color: var(--text-secondary);">Loading <%= pageTitleValue.toLowerCase() %>...</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center" id="pagination">
        <!-- Pagination will be generated by JavaScript -->
      </ul>
    </nav>

    <!-- Empty State -->
    <div id="emptyState" class="d-none text-center py-5">
      <div class="rounded-4 border-0 p-5" style="background-color: var(--bg-primary); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);">
        <i class="fas fa-inbox fa-3x mb-3" style="color: var(--text-tertiary); opacity: 0.5;"></i>
        <p class="mb-2 fw-medium" style="color: var(--text-primary);">No <%= pageTitleValue.toLowerCase() %> found</p>
        <p class="small mb-0" style="color: var(--text-secondary);">Try adjusting your search or filters</p>
      </div>
    </div>
  </div>
</div>

<!-- Create/Edit Modal -->
<div class="modal fade" id="crudModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 border-0" style="background-color: var(--bg-primary); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);">
      <div class="modal-header border-0 pb-0 pt-4 px-4">
        <h5 class="modal-title fw-bold fs-5" id="modalTitle" style="color: var(--text-primary);">Add New <%= pageTitleValue.slice(0, -1) %></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="opacity: 0.6;"></button>
      </div>
      <form id="crudForm" onsubmit="handleSubmit(event)">
        <div class="modal-body px-4 py-3">
          <% fieldsValue.forEach(function(field) { %>
            <div class="mb-3">
              <label class="form-label fw-medium mb-2" style="color: var(--text-primary); font-size: 0.9rem;">
                <%= field.label %>
                <% if (field.required) { %><span class="text-danger">*</span><% } %>
              </label>
              <% if (field.type === 'select') { %>
                <select class="form-select" name="<%= field.name %>" id="<%= field.name %>" 
                        style="border-color: var(--border-medium); background-color: var(--bg-primary); color: var(--text-primary);"
                        <% if (field.required) { %>required<% } %>>
                  <option value="">Select <%= field.label %></option>
                  <% if (field.options) { %>
                    <% field.options.forEach(function(opt) { %>
                      <option value="<%= opt.value %>"><%= opt.label %></option>
                    <% }); %>
                  <% } %>
                </select>
              <% } else if (field.type === 'textarea') { %>
                <textarea class="form-control" name="<%= field.name %>" id="<%= field.name %>" rows="3"
                          style="border-color: var(--border-medium); background-color: var(--bg-primary); color: var(--text-primary);"
                          <% if (field.required) { %>required<% } %>></textarea>
              <% } else { %>
                <input type="<%= field.type || 'text' %>" class="form-control" name="<%= field.name %>" id="<%= field.name %>"
                       style="border-color: var(--border-medium); background-color: var(--bg-primary); color: var(--text-primary);"
                       <% if (field.required) { %>required<% } %>>
              <% } %>
            </div>
          <% }); %>
        </div>
        <div class="modal-footer border-0 pt-0 pb-4 px-4">
          <button type="button" class="btn btn-light btn-sm px-4" data-bs-dismiss="modal" style="border-color: var(--border-medium); color: var(--text-secondary);">Cancel</button>
          <button type="submit" class="btn btn-primary btn-sm px-4" id="submitBtn" style="background-color: var(--color-primary-600); border-color: var(--color-primary-600); font-weight: 500;">
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Configuration injected from EJS template as JSON -->
<script type="application/json" id="crud-config">
<%- JSON.stringify({
    apiEndpoint: apiEndpointValue,
    pageTitle: pageTitleValue,
    entityName: entityNameValue,
    columns: columnsValue,
    fieldNames: fieldsValue.map(function(f) { return f.name; }),
    fields: fieldsValue,
    headersCount: headersValue.length,
    itemsPerPage: itemsPerPageValue,
    editMode: editModeValue
}) %>
</script>

<script>
  // Parse configuration from JSON script tag (avoids EJS syntax in JavaScript)
  const configScript = document.getElementById('crud-config');
  const CRUD_CONFIG = configScript ? JSON.parse(configScript.textContent) : {
    apiEndpoint: '/api/items',
    pageTitle: 'Items',
    entityName: 'item',
    columns: [],
    fieldNames: [],
    fields: [],
    headersCount: 0,
    itemsPerPage: 10,
    editMode: 'modal'
  };

  let currentEditId = null;
  let allItems = [];
  let filteredItems = [];
  let currentPage = 1;
  let modal = null;
  
  // Initialize modal and load data on page load
  document.addEventListener('DOMContentLoaded', function() {
    // Wait for Bootstrap to be available
    if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
      const modalElement = document.getElementById('crudModal');
      if (modalElement) {
        modal = new bootstrap.Modal(modalElement);
      }
    }
    loadData();
  });

  function loadData() {
    const token = localStorage.getItem('accessToken');
    if (!token) {
      window.location.href = '/auth/login';
      return;
    }

    fetch(CRUD_CONFIG.apiEndpoint, {
      headers: { 'Authorization': 'Bearer ' + token }
    })
      .then(function(r) {
        if (!r.ok) throw new Error('Failed to load');
        return r.json();
      })
      .then(function(data) {
        allItems = data.data || data || [];
        filteredItems = allItems.slice();
        currentPage = 1;
        renderTable();
        renderPagination();
      })
      .catch(function(err) {
        console.error('Error loading data:', err);
        document.getElementById('tableBody').innerHTML = '<tr><td colspan="' + (CRUD_CONFIG.headersCount + 1) + '" class="text-center py-5" style="color: var(--text-tertiary);">Error loading data</td></tr>';
      });
  }

  function renderTable() {
    const tbody = document.getElementById('tableBody');
    const emptyState = document.getElementById('emptyState');
    
    const startIdx = (currentPage - 1) * CRUD_CONFIG.itemsPerPage;
    const endIdx = startIdx + CRUD_CONFIG.itemsPerPage;
    const pageItems = filteredItems.slice(startIdx, endIdx);
    
    if (pageItems.length === 0) {
      tbody.innerHTML = '';
      emptyState.classList.remove('d-none');
      return;
    }
    
    emptyState.classList.add('d-none');
    
    tbody.innerHTML = pageItems.map(function(item) {
      const cells = CRUD_CONFIG.columns.map(function(col) {
        const value = item[col] || '';
        return '<td class="px-4 py-3 small" style="color: var(--text-primary);">' + escapeHtml(String(value)) + '</td>';
      }).join('');
      
      let actionButtons = '';
      if (CRUD_CONFIG.editMode === 'inline') {
        actionButtons = '<button class="btn btn-sm btn-outline-primary me-2" onclick="enableInlineEdit(' + item.id + ')" style="border-color: var(--color-primary-600); color: var(--color-primary-600);"><i class="fas fa-edit"></i></button>';
      } else {
        actionButtons = '<button class="btn btn-sm btn-outline-primary me-2" onclick="editItem(' + item.id + ')" style="border-color: var(--color-primary-600); color: var(--color-primary-600);"><i class="fas fa-edit"></i></button>';
      }
      actionButtons += '<button class="btn btn-sm btn-outline-danger" onclick="deleteItem(' + item.id + ')" style="border-color: var(--color-error); color: var(--color-error);"><i class="fas fa-trash"></i></button>';
      
      return '<tr id="row-' + item.id + '">' +
        cells +
        '<td class="px-4 py-3 text-end">' + actionButtons + '</td>' +
      '</tr>';
    }).join('');
  }

  function renderPagination() {
    const totalPages = Math.ceil(filteredItems.length / CRUD_CONFIG.itemsPerPage);
    const pagination = document.getElementById('pagination');
    
    if (totalPages <= 1) {
      pagination.innerHTML = '';
      return;
    }
    
    let html = '';
    
    // Previous button
    html += '<li class="page-item' + (currentPage === 1 ? ' disabled' : '') + '">';
    html += '<a class="page-link" href="#" onclick="changePage(' + (currentPage - 1) + '); return false;">Previous</a>';
    html += '</li>';
    
    // Page numbers
    const maxVisible = 5;
    let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
    let endPage = Math.min(totalPages, startPage + maxVisible - 1);
    
    if (endPage - startPage < maxVisible - 1) {
      startPage = Math.max(1, endPage - maxVisible + 1);
    }
    
    if (startPage > 1) {
      html += '<li class="page-item"><a class="page-link" href="#" onclick="changePage(1); return false;">1</a></li>';
      if (startPage > 2) {
        html += '<li class="page-item disabled"><span class="page-link">...</span></li>';
      }
    }
    
    for (let i = startPage; i <= endPage; i++) {
      html += '<li class="page-item' + (i === currentPage ? ' active' : '') + '">';
      html += '<a class="page-link" href="#" onclick="changePage(' + i + '); return false;">' + i + '</a>';
      html += '</li>';
    }
    
    if (endPage < totalPages) {
      if (endPage < totalPages - 1) {
        html += '<li class="page-item disabled"><span class="page-link">...</span></li>';
      }
      html += '<li class="page-item"><a class="page-link" href="#" onclick="changePage(' + totalPages + '); return false;">' + totalPages + '</a></li>';
    }
    
    // Next button
    html += '<li class="page-item' + (currentPage === totalPages ? ' disabled' : '') + '">';
    html += '<a class="page-link" href="#" onclick="changePage(' + (currentPage + 1) + '); return false;">Next</a>';
    html += '</li>';
    
    pagination.innerHTML = html;
  }

  function changePage(page) {
    const totalPages = Math.ceil(filteredItems.length / CRUD_CONFIG.itemsPerPage);
    if (page < 1 || page > totalPages) return;
    currentPage = page;
    renderTable();
    renderPagination();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function handleSearch() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const filterValue = document.getElementById('filterSelect') ? document.getElementById('filterSelect').value : '';
    
    filteredItems = allItems.filter(function(item) {
      const matchesSearch = CRUD_CONFIG.columns.some(function(col) {
        return String(item[col] || '').toLowerCase().includes(searchTerm);
      });
      
      const matchesFilter = !filterValue || item.status === filterValue || item.filter === filterValue;
      
      return matchesSearch && matchesFilter;
    });
    
    currentPage = 1;
    renderTable();
    renderPagination();
  }

  function handleFilter() {
    handleSearch();
  }

  function enableInlineEdit(id) {
    const row = document.getElementById('row-' + id);
    if (!row) return;
    
    const cells = row.querySelectorAll('td');
    const item = allItems.find(function(i) { return i.id === id; });
    if (!item) return;
    
    // Replace cells with input fields (except actions column)
    for (let i = 0; i < CRUD_CONFIG.columns.length; i++) {
      const col = CRUD_CONFIG.columns[i];
      const field = getFieldByName(col);
      if (!field) continue;
      
      const cell = cells[i];
      const value = item[col] || '';
      
      if (field.type === 'select') {
        let optionsHtml = '<option value="">Select ' + field.label + '</option>';
        if (field.options) {
          field.options.forEach(function(opt) {
            optionsHtml += '<option value="' + opt.value + '"' + (opt.value == value ? ' selected' : '') + '>' + opt.label + '</option>';
          });
        }
        cell.innerHTML = '<select class="form-select form-select-sm" id="inline-' + col + '-' + id + '">' + optionsHtml + '</select>';
      } else {
        cell.innerHTML = '<input type="' + (field.type || 'text') + '" class="form-control form-control-sm" id="inline-' + col + '-' + id + '" value="' + escapeHtml(String(value)) + '">';
      }
    }
    
    // Replace action buttons with save/cancel
    const actionCell = cells[cells.length - 1];
    actionCell.innerHTML = '<button class="btn btn-sm btn-success me-2" onclick="saveInlineEdit(' + id + ')"><i class="fas fa-check"></i></button>' +
                          '<button class="btn btn-sm btn-secondary" onclick="cancelInlineEdit(' + id + ')"><i class="fas fa-times"></i></button>';
  }

  function saveInlineEdit(id) {
    const item = allItems.find(function(i) { return i.id === id; });
    if (!item) return;
    
    const data = {};
    CRUD_CONFIG.columns.forEach(function(col) {
      const input = document.getElementById('inline-' + col + '-' + id);
      if (input) {
        data[col] = input.value;
      }
    });
    
    const token = localStorage.getItem('accessToken');
    fetch(CRUD_CONFIG.apiEndpoint + '/' + id, {
      method: 'PUT',
      headers: {
        'Authorization': 'Bearer ' + token,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    })
      .then(function(r) { return r.json(); })
      .then(function(result) {
        if (result.id || result.data) {
          loadData();
          alert('Updated successfully!');
        } else {
          alert(result.message || 'Error updating');
        }
      })
      .catch(function(err) {
        alert('Error updating');
        console.error(err);
      });
  }

  function cancelInlineEdit(id) {
    loadData();
  }

  function getFieldByName(name) {
    return CRUD_CONFIG.fields.find(function(f) { return f.name === name; });
  }

  function openCreateModal() {
    if (!modal) {
      const modalElement = document.getElementById('crudModal');
      if (modalElement && typeof bootstrap !== 'undefined' && bootstrap.Modal) {
        modal = new bootstrap.Modal(modalElement);
      } else {
        console.error('Bootstrap Modal not available');
        return;
      }
    }
    currentEditId = null;
    const modalTitleEl = document.getElementById('modalTitle');
    const crudFormEl = document.getElementById('crudForm');
    if (modalTitleEl) {
      modalTitleEl.textContent = 'Add New ' + CRUD_CONFIG.pageTitle.slice(0, -1);
    }
    if (crudFormEl) {
      crudFormEl.reset();
    }
    modal.show();
  }

  function editItem(id) {
    if (!modal) {
      const modalElement = document.getElementById('crudModal');
      if (modalElement && typeof bootstrap !== 'undefined' && bootstrap.Modal) {
        modal = new bootstrap.Modal(modalElement);
      } else {
        console.error('Bootstrap Modal not available');
        return;
      }
    }
    currentEditId = id;
    const token = localStorage.getItem('accessToken');
    
    fetch(CRUD_CONFIG.apiEndpoint + '/' + id, {
      headers: { 'Authorization': 'Bearer ' + token }
    })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        const item = data.data || data;
        const modalTitleEl = document.getElementById('modalTitle');
        if (modalTitleEl) {
          modalTitleEl.textContent = 'Edit ' + CRUD_CONFIG.pageTitle.slice(0, -1);
        }
        
        CRUD_CONFIG.fieldNames.forEach(function(fieldName) {
          const fieldInput = document.getElementById(fieldName);
          if (fieldInput) {
            fieldInput.value = item[fieldName] || '';
          }
        });
        
        modal.show();
      })
      .catch(function(err) {
        alert('Error loading item');
        console.error(err);
      });
  }

  function handleSubmit(e) {
    e.preventDefault();
    const token = localStorage.getItem('accessToken');
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData);
    
    const submitBtn = document.getElementById('submitBtn');
    const originalText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
    
    const url = currentEditId ? CRUD_CONFIG.apiEndpoint + '/' + currentEditId : CRUD_CONFIG.apiEndpoint;
    const method = currentEditId ? 'PUT' : 'POST';
    
    fetch(url, {
      method: method,
      headers: {
        'Authorization': 'Bearer ' + token,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    })
      .then(function(r) {
        return r.json().then(function(result) {
          return { ok: r.ok, data: result };
        });
      })
      .then(function(response) {
        if (response.ok || response.data.id) {
          modal.hide();
          loadData();
          alert('Saved successfully!');
        } else {
          alert(response.data.message || 'Error saving');
        }
      })
      .catch(function(err) {
        alert('Error saving');
        console.error(err);
      })
      .finally(function() {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
      });
  }

  function deleteItem(id) {
    if (!confirm('Are you sure you want to delete this item?')) return;
    
    const token = localStorage.getItem('accessToken');
    fetch(CRUD_CONFIG.apiEndpoint + '/' + id, {
      method: 'DELETE',
      headers: { 'Authorization': 'Bearer ' + token }
    })
      .then(function(r) {
        return r.json().then(function(result) {
          return { ok: r.ok, data: result };
        });
      })
      .then(function(response) {
        if (response.ok) {
          loadData();
          alert('Deleted successfully!');
        } else {
          alert(response.data.message || 'Error deleting');
        }
      })
      .catch(function(err) {
        alert('Error deleting');
        console.error(err);
      });
  }

  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }
  
  // Make all functions globally accessible for onclick/onchange handlers
  window.openCreateModal = openCreateModal;
  window.editItem = editItem;
  window.deleteItem = deleteItem;
  window.handleSearch = handleSearch;
  window.handleFilter = handleFilter;
  window.changePage = changePage;
  window.enableInlineEdit = enableInlineEdit;
  window.saveInlineEdit = saveInlineEdit;
  window.cancelInlineEdit = cancelInlineEdit;
  window.handleSubmit = handleSubmit;
</script>

