<div class="container py-5" style="padding-top: 5rem !important;">
  <div class="row mb-4">
    <div class="col-12 d-flex align-items-center justify-content-between">
      <div>
        <h1 class="fs-2 fw-bold mb-2" style="color: var(--text-primary);">Realtime Features</h1>
        <p class="small mb-0" style="color: var(--text-secondary);">Experience real-time capabilities powered by WebSocket technology</p>
      </div>
      <div id="connectionStatus" class="d-flex align-items-center gap-2 px-3 py-2 rounded-3 border" style="background-color: var(--bg-secondary); border-color: var(--border-light);">
        <div id="statusIndicator" class="rounded-circle" style="width: 0.5rem; height: 0.5rem; background-color: var(--text-tertiary);"></div>
        <span id="statusText" class="small fw-medium" style="color: var(--text-secondary);">Connecting...</span>
      </div>
    </div>
  </div>

  <div class="row g-4 mb-4">
    <div class="col-12 col-lg-6">
      <div class="rounded-3 border p-4" style="background-color: var(--bg-primary); border-color: var(--border-light) !important; box-shadow: var(--shadow-sm);">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <div class="d-flex align-items-center gap-3">
            <div class="d-flex align-items-center justify-content-center rounded-2" style="width: 2.5rem; height: 2.5rem; background-color: var(--color-primary-50);">
              <i class="fas fa-comments" style="color: var(--color-primary-600);"></i>
            </div>
            <div>
              <h3 class="fs-5 fw-semibold mb-0" style="color: var(--text-primary);">Live Chat</h3>
              <p class="small mb-0" style="color: var(--text-tertiary);">Real-time messaging</p>
            </div>
          </div>
          <div id="chatUsersCount" class="d-flex align-items-center gap-1 px-2 py-1 rounded-2" style="background-color: var(--bg-secondary);">
            <i class="fas fa-users small" style="color: var(--text-tertiary);"></i>
            <span class="small fw-medium" style="color: var(--text-secondary);">0</span>
          </div>
        </div>
        <div id="chatMessages" class="mb-3 rounded-2" style="height: 16rem; overflow-y: auto; background-color: var(--bg-secondary); padding: 1rem;">
          <div class="text-center py-5">
            <i class="fas fa-comment-dots mb-2" style="font-size: 2rem; color: var(--text-tertiary);"></i>
            <p class="small mb-0" style="color: var(--text-secondary);">No messages yet. Start the conversation!</p>
          </div>
        </div>
        <div class="d-flex gap-2">
          <input type="text" id="chatInput" placeholder="Type a message..." class="form-control py-2" style="border-color: var(--border-medium); background-color: var(--bg-secondary); color: var(--text-primary);" onfocus="this.style.borderColor='var(--color-primary-600)';" onblur="this.style.borderColor='var(--border-medium)';" onkeypress="if(event.key === 'Enter') { sendChatMessage(); }">
          <button onclick="sendChatMessage()" class="btn px-3 py-2 rounded-2 border-0" style="background-color: var(--color-primary-600); color: var(--text-inverse);" onmouseover="this.style.backgroundColor='var(--color-primary-700)';" onmouseout="this.style.backgroundColor='var(--color-primary-600)';">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-6">
      <div class="rounded-3 border p-4" style="background-color: var(--bg-primary); border-color: var(--border-light) !important; box-shadow: var(--shadow-sm);">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <div class="d-flex align-items-center gap-3">
            <div class="d-flex align-items-center justify-content-center rounded-2" style="width: 2.5rem; height: 2.5rem; background-color: var(--color-primary-50);">
              <i class="fas fa-bell" style="color: var(--color-primary-600);"></i>
            </div>
            <div>
              <h3 class="fs-5 fw-semibold mb-0" style="color: var(--text-primary);">Notifications</h3>
              <p class="small mb-0" style="color: var(--text-tertiary);">Real-time updates</p>
            </div>
          </div>
          <button onclick="clearNotifications()" class="btn btn-sm px-2 py-1 small fw-medium" style="color: var(--text-tertiary); background: transparent; border: none;" onmouseover="this.style.color='var(--text-primary)';" onmouseout="this.style.color='var(--text-tertiary)';">
            Clear
          </button>
        </div>
        <div id="notificationsList" class="rounded-2" style="min-height: 16rem; background-color: var(--bg-secondary); padding: 1rem;">
          <div class="text-center py-5">
            <i class="fas fa-bell-slash mb-2" style="font-size: 2rem; color: var(--text-tertiary);"></i>
            <p class="small mb-0" style="color: var(--text-secondary);">No notifications yet</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-6 col-md-3">
      <div class="rounded-3 border p-3" style="background-color: var(--bg-primary); border-color: var(--border-light) !important;">
        <p class="small mb-1" style="color: var(--text-tertiary);">Active Connections</p>
        <p id="connectionsCount" class="fs-3 fw-bold mb-0" style="color: var(--text-primary);">0</p>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="rounded-3 border p-3" style="background-color: var(--bg-primary); border-color: var(--border-light) !important;">
        <p class="small mb-1" style="color: var(--text-tertiary);">Messages Sent</p>
        <p id="messagesCount" class="fs-3 fw-bold mb-0" style="color: var(--text-primary);">0</p>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="rounded-3 border p-3" style="background-color: var(--bg-primary); border-color: var(--border-light) !important;">
        <p class="small mb-1" style="color: var(--text-tertiary);">Notifications</p>
        <p id="notificationsCount" class="fs-3 fw-bold mb-0" style="color: var(--text-primary);">0</p>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="rounded-3 border p-3" style="background-color: var(--bg-primary); border-color: var(--border-light) !important;">
        <p class="small mb-1" style="color: var(--text-tertiary);">Latency</p>
        <p id="latencyValue" class="fs-3 fw-bold mb-0" style="color: var(--text-primary);">-- ms</p>
      </div>
    </div>
  </div>
</div>

<% const scriptsContent = `
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const token = localStorage.getItem('accessToken');
    if (!token) {
      window.location.href = '/auth/login?redirect=' + encodeURIComponent(window.location.pathname);
      return;
    }
  });
</script>
<script src="/assets/realtime.js"></script>
`; %>
<%- include('layouts/base', { title: 'Realtime Features - Platform', body: '', scripts: scriptsContent }) %>
